import{d as B,a as Q,h as r,u as N,r as p,i as A,g as i,e as _,w as l,k as a,o as f,Q as E,n as m,f as v,t as b,b9 as S,ba as I,j as T,aZ as V,bL as z,aB as L,aC as $}from"./index.e7dff7f9.js";import{Q as q}from"./QInput.5e8659ec.js";import{Q as U,a as g}from"./QTable.f1fffe23.js";import{Q as M}from"./QRadio.3aa3a6d5.js";import{u as O,C as R,B as F}from"./BigSpinner.c880dff8.js";import{f as j}from"./address.94d37a80.js";import{f as G}from"./phone.158664be.js";import{_ as H}from"./ConfirmDialog.e08b6ef8.js";import{_ as W}from"./NoData.f1dffd19.js";import{c as Z}from"./fuzzy-search.950e6fed.js";import"./use-dark.e86b84e1.js";import"./focus-manager.05708ea9.js";import"./QList.8a91291d.js";import"./QSelect.52be5e2a.js";import"./QChip.822f6433.js";import"./QItemLabel.86a2b9d8.js";import"./QMenu.40dfec20.js";import"./position-engine.c971a6c8.js";import"./portal.e6ae3f7c.js";import"./QDialog.d42ee4cd.js";import"./focusout.670f670d.js";import"./use-checkbox.103a706e.js";import"./use-fullscreen.3886c554.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./capitalize.b0e9fa3f.js";import"./QCardSection.0cb8721b.js";import"./QCard.d6442979.js";import"./ClosePopup.003c9d37.js";const J={class:"text-weight-bold"},xe=B({__name:"AdminSalePoints",setup(K){const d=Q(),h=r(()=>d.state.salePoints.salePoints),y=r(()=>Z(h.value,["name","phone","email","isDefault","address.city","address.street","address.homeNumber","address.postalCode"])),w=r(()=>y.value.search(c.value)),k=r(()=>[R.SALE_POINTS]);let P=O(k,{store:d});const t=N(),s=p(null),u=p(!1),c=p(""),D=[{name:"index",label:"#",field:"index",align:"center"},{name:"name",label:t.value.name,align:"center",field:"name",sortable:!0},{name:"address",label:t.value.address,align:"center",field:"address",format:o=>j(o)},{name:"phone",label:t.value.phone,align:"center",field:"phone",format:o=>G(o)},{name:"email",label:t.value.email,align:"center",field:"email"},{name:"isDefault",label:t.value.isDefault,align:"center",field:"isDefault"},{name:"actions",label:"",align:"right"}],C=o=>{s.value=o},x=()=>{V(s.value,"");const o=s.value.id;s.value=null,u.value=!0,d.commit.sync(z({id:o})).then(()=>{L.create({type:"positive",position:"top",timeout:$,message:t.value.deleteSuccess,multiLine:!0,group:!1})}).finally(()=>{u.value=!1})};return(o,n)=>(f(),A("div",null,[i(P)?(f(),_(F,{key:0})):(f(),_(U,{key:1,class:"q-mx-auto max-w-xl sticky-last-column-table",rows:w.value,columns:D,"row-key":"id","binary-state-sort":"","rows-per-page-label":i(t).perPage,loading:u.value,pagination:{rowsPerPage:i(I)}},{"top-right":l(()=>[a(q,{dense:"",modelValue:c.value,"onUpdate:modelValue":n[0]||(n[0]=e=>c.value=e),placeholder:i(t).search,class:"q-mr-lg q-my-sm"},{append:l(()=>[a(E,{name:"search"})]),_:1},8,["modelValue","placeholder"]),a(m,{color:"primary",icon:"add",label:i(t).addSalePoint,to:"/admin/sale-points/create"},null,8,["label"])]),"body-cell-index":l(e=>[a(g,{props:e},{default:l(()=>[v(b(e.rowIndex+1),1)]),_:2},1032,["props"])]),"body-cell-isDefault":l(e=>[a(g,{props:e},{default:l(()=>[a(M,{class:"disabled-cursor-default","model-value":"true","checked-icon":"task_alt","unchecked-icon":"close",val:e.row.isDefault.toString(),label:"",disable:"",color:e.row.isDefault?"positive":"negative","keep-color":""},null,8,["val","color"])]),_:2},1032,["props"])]),"body-cell-actions":l(e=>[a(g,{props:e,"auto-width":""},{default:l(()=>[a(m,{flat:"",size:"md",icon:"mode_edit",color:"primary",dense:"",class:"q-mr-sm",onClick:n[1]||(n[1]=S(()=>{},["stop"])),to:`/admin/sale-points/update/${e.row.id}`},null,8,["to"]),a(m,{flat:"",size:"md",icon:"o_delete",color:"negative",dense:"",onClick:S(X=>C(e.row),["stop"])},null,8,["onClick"])]),_:2},1032,["props"])]),"no-data":l(()=>[a(W)]),_:1},8,["rows","rows-per-page-label","loading","pagination"])),a(H,{"model-value":!!s.value,"onUpdate:modelValue":n[2]||(n[2]=e=>s.value=null)},{body:l(()=>{var e;return[v(b(i(t).confirmSalePointDelete)+" ",1),T("span",J,'"'+b(((e=s.value)==null?void 0:e.name)||"")+'"',1),v("? ")]}),confirmButton:l(()=>[a(m,{flat:"",label:i(t).deleteButton,color:"negative",onClick:x},null,8,["label"])]),_:1},8,["model-value"])]))}});export{xe as default};
