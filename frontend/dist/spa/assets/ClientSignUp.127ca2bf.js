import{Q as x}from"./QInput.e35961c4.js";import{d as A,a as U,r,u as S,c as E,bX as Q,h as w,i as V,j as u,t as n,g as t,ag as C,k as s,w as i,ck as L,o as b,bD as y,bE as N,n as M,f as R,aF as T}from"./index.1c3783dc.js";import{Q as F}from"./QCardSection.ef6e6dbe.js";import{Q as I}from"./QCard.5aa3fe54.js";import{Q as $,o as B}from"./on-form-validation-error.73894483.js";import{_ as H}from"./EmailInput.e33b3853.js";import{_ as X}from"./PasswordInput.517fdd67.js";import{_ as z}from"./PhoneInput.1fd612eb.js";import{a as D}from"./create-order.5b36a63a.js";import"./use-dark.af62a438.js";import"./focus-manager.05708ea9.js";const G={class:"q-pa-md bg-gray-lightest min-height-window"},O={class:"q-my-xl text-center text-dark-lighter"},j={class:"text-h3"},J={key:0,class:"text-h6"},K={class:"q-mt-xl"},P={class:"text-center text-h6 q-mt-xl text-weight-regular"},ie=A({__name:"ClientSignUp",setup(W){const o=U(),m=r(!1),l=S(),v=E(),d=r(""),c=r(""),p=r(""),f=r(""),g=r(""),k=Q(),h=w(()=>{var _,a;return l.value[(a=(_=k.query)==null?void 0:_.text)==null?void 0:a.toString()]||""}),q=async()=>{m.value=!0,o.commit.sync(L({email:d.value,phone:c.value,password:p.value,firstName:f.value,lastName:g.value})).then(()=>(o.client.changeUser(o.state.auth.user.userId||"",o.state.auth.user.accessToken||""),o.state.orders.createOrderAfterAuth?D(o,l,v):v.push("/"))).finally(()=>{m.value=!1})};return(_,a)=>(b(),V("div",G,[u("div",null,[u("div",O,[u("h1",j,n(t(l).signUp),1),h.value?(b(),V("p",J,n(h.value),1)):C("",!0)]),s($,{onSubmit:q,class:"max-w-sm q-mx-auto",onValidationError:t(B)},{default:i(()=>[s(I,{class:"q-pa-md"},{default:i(()=>[s(F,{class:"q-gutter-lg"},{default:i(()=>[s(x,{modelValue:f.value,"onUpdate:modelValue":a[0]||(a[0]=e=>f.value=e),modelModifiers:{trim:!0},"stack-label":"",label:`${t(l).firstName} *`,"lazy-rules":"",type:"text",rules:[e=>!!e&&e.length>0||t(l).fieldRequired,e=>e.length<=t(y)||t(l).maxLength({max:t(y)})]},null,8,["modelValue","label","rules"]),s(x,{modelValue:g.value,"onUpdate:modelValue":a[1]||(a[1]=e=>g.value=e),modelModifiers:{trim:!0},"stack-label":"",label:`${t(l).lastName} *`,"lazy-rules":"",type:"text",rules:[e=>!!e&&e.length>0||t(l).fieldRequired,e=>e.length<=t(N)||t(l).maxLength({max:t(N)})]},null,8,["modelValue","label","rules"]),s(H,{modelValue:d.value,"onUpdate:modelValue":a[2]||(a[2]=e=>d.value=e)},null,8,["modelValue"]),s(z,{modelValue:c.value,"onUpdate:modelValue":a[3]||(a[3]=e=>c.value=e),shouldValidateFormat:""},null,8,["modelValue"]),s(X,{modelValue:p.value,"onUpdate:modelValue":a[4]||(a[4]=e=>p.value=e),"should-validate-format":!0,required:""},null,8,["modelValue"]),u("div",K,[s(M,{label:t(l).signUp,loading:m.value,type:"submit",color:"primary",class:"q-mx-auto d-block"},null,8,["label","loading"])])]),_:1})]),_:1})]),_:1},8,["onValidationError"])]),u("div",P,[u("p",null,n(t(l).alreadyHaveAccount),1),s(t(T),{class:"link",to:"/login"},{default:i(()=>[R(n(t(l).logIn),1)]),_:1})])]))}});export{ie as default};
