import{Q as V}from"./QSpace.e0f5dbfc.js";import{be as i,d as L,h as x,u as M,r as m,a as P,a8 as T,J as $,H as C,o as I,e as O,w as r,k as l,j as d,t as u,g as t,a5 as Y,n as S,bP as j,f as h,aA as F,aB as K}from"./index.9a4cab8b.js";import{Q as _}from"./QCardSection.44124512.js";import{Q as c}from"./QInput.c820a074.js";import{Q as G}from"./QTooltip.2af661a3.js";import{Q as H,o as J}from"./on-form-validation-error.f1d5dce0.js";import{Q as X}from"./QCard.e5424a73.js";import{Q as Z}from"./QDialog.144d910d.js";import{C as W}from"./ClosePopup.136dfd71.js";import{m as ee}from"./address.94d37a80.js";i("addresses/loaded");const se=i("addresses/create");i("addresses/created");const te=i("addresses/update");i("addresses/updated");const ge=i("addresses/delete");i("addresses/deleted");const ae={class:"text-h6"},le={class:"text-body1 text-dark-gray q-mb-lg"},oe={class:"address-inputs"},re=["src"],w="https://www.google.com/maps/embed/v1/search?key=AIzaSyA4wNwpARhZ7Y4FKCclfAwqLgxjKhACi0g",Q=14,de="Pinczow",Ae=L({__name:"AddAddressModal",props:{submitYourself:{type:Boolean},originalAddress:{}},emits:["submit"],setup(k,{emit:q}){const b=k,v=q,n=x(()=>b.originalAddress),E=x(()=>b.submitYourself),s=M(),z=de,N=w+"&q="+z+"&zoom="+Q,y=m(N),B=P(),p=m(!1),g=m(!1),f=m(),a=T({city:"",street:"",homeNumber:"",postalCode:""}),R=$(()=>{U()},500);C(a,()=>{R()}),C(n,()=>{!n.value||Object.assign(a,n.value)},{immediate:!0});async function U(){const A=await f.value.validate(!1);if(g.value||f.value.resetValidation(),!A)return;const o=ee(a);y.value=w+"&q="+o+"&zoom="+Q}function D(){if(!E.value){v("submit",a);return}p.value=!0,B.commit.sync(n.value?te({id:n.value.id||"",address:a}):se({address:a})).then(()=>{F.create({type:"positive",position:"top",timeout:K,message:n.value?s.value.updateSuccess:s.value.createSuccess,multiLine:!0,group:!1}),v("submit",a)}).finally(()=>{p.value=!1})}return(A,o)=>(I(),O(Z,null,{default:r(()=>[l(X,{class:"q-pb-sm dialog-md"},{default:r(()=>[l(_,{class:"row items-center"},{default:r(()=>[l(V),d("div",ae,u(t(s).addAddress),1),l(V),Y(l(S,{icon:"close",flat:"",round:"",dense:"",title:t(s).close},null,8,["title"]),[[W]])]),_:1}),l(_,null,{default:r(()=>[d("div",le,[d("p",null,u(t(s).addressExplanation1),1),d("p",null,u(t(s).addressExplanation2),1)]),l(H,{onSubmit:D,onValidationError:t(J),ref_key:"form",ref:f},{default:r(()=>[d("div",oe,[l(c,{modelValue:a.city,"onUpdate:modelValue":o[0]||(o[0]=e=>a.city=e),"stack-label":"",label:`${t(s).city} *`,"lazy-rules":"",type:"text",rules:[e=>!!e||t(s).fieldRequired]},null,8,["modelValue","label","rules"]),l(c,{modelValue:a.street,"onUpdate:modelValue":o[1]||(o[1]=e=>a.street=e),"stack-label":"",label:`${t(s).street} *`,"lazy-rules":"",type:"text",rules:[e=>!!e||t(s).fieldRequired]},null,8,["modelValue","label","rules"]),l(c,{modelValue:a.homeNumber,"onUpdate:modelValue":o[2]||(o[2]=e=>a.homeNumber=e),"stack-label":"",label:`${t(s).homeNumber} *`,"lazy-rules":"",type:"text",rules:[e=>!!e||t(s).fieldRequired]},null,8,["modelValue","label","rules"]),l(c,{modelValue:a.postalCode,"onUpdate:modelValue":o[3]||(o[3]=e=>a.postalCode=e),"stack-label":"",mask:"##-###",label:`${t(s).postalCode} *`,"lazy-rules":"",type:"text",rules:[e=>!!e||t(s).fieldRequired,e=>t(j).test(e)||t(s).invalidPostalCode]},null,8,["modelValue","label","rules"])]),d("div",null,[d("iframe",{class:"q-mt-lg no-events",src:y.value,width:"100%",height:"400px",title:"map"},`
            `,8,re),l(G,{anchor:"center middle",self:"center middle",class:"bg-negative text-white text-body2"},{default:r(()=>[h(u(t(s).readonlyMap),1)]),_:1})]),l(S,{color:"primary",class:"d-block q-mx-auto q-mt-md",type:"submit",loading:p.value,onClick:o[4]||(o[4]=e=>g.value=!0)},{default:r(()=>[h(u(t(s).save),1)]),_:1},8,["loading"])]),_:1},8,["onValidationError"])]),_:1})]),_:1})]),_:1}))}});export{Ae as _,ge as d};
