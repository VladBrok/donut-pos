import{d as _,u as d,a as f,r as h,bY as x,g as w,af as k,c as v,w as n,l as A,o as u,j as i,t as a,f as c,i as S,ah as y,k as C,e as b}from"./index.7ae99152.js";import{a as B}from"./create-order.189453e5.js";import{_ as L}from"./LoginPage.f84463f5.js";import"./QCardSection.e04a19bd.js";import"./QCard.ece06ff7.js";import"./use-dark.4188ae36.js";import"./on-form-validation-error.f744f424.js";import"./focus-manager.05708ea9.js";import"./EmailInput.ced02575.js";import"./QInput.23cad58c.js";import"./PasswordInput.e3376571.js";const N={key:0,class:"text-h6"},V={class:"text-center text-h6 q-mt-xl text-weight-regular"},$=_({__name:"ClientLogin",setup(I){const o=d(),t=f(),r=h(!1),m=x(),l=w(()=>{var e,s;return o.value[((s=(e=m.query)==null?void 0:e.text)==null?void 0:s.toString())||""]||""}),p=async e=>{r.value=!0,t.commit.sync(A({email:e.email,password:e.password,permissions:{client:!0}})).then(()=>{if(t.client.changeUser(t.state.auth.user.userId||"",t.state.auth.user.accessToken||""),t.state.orders.createOrderAfterAuth)return B(t,o);const s=new URL("/",window.location.origin);window.location.href=s.toString()}).catch(()=>{r.value=!1})};return(e,s)=>{const g=k("router-link");return u(),v(L,{"is-logging-in":r.value,onSubmit:p,"icon-name":"o_restaurant_menu"},{title:n(()=>[i("span",null,a(c(o).clientLoginPageTitle),1)]),subtitle:n(()=>[l.value?(u(),S("p",N,a(l.value),1)):y("",!0)]),bottom:n(()=>[i("div",V,[i("p",null,a(c(o).dontHaveAccount),1),C(g,{class:"link",to:"/sign-up"},{default:n(()=>[b(a(c(o).signUp),1)]),_:1})])]),_:1},8,["is-logging-in"])}}});export{$ as default};
