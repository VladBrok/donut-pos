import{d as Q,a as D,h as s,u as M,r as p,i as A,g as l,e as _,w as t,k as a,o as f,Q as E,n as m,f as g,t as b,b9 as w,ba as N,j as T,aZ as V,bt as z,aB as U,aC as P}from"./index.0dcec281.js";import{Q as $}from"./QInput.3643c48a.js";import{Q as q,a as v}from"./QTable.76c11d3f.js";import{Q as O}from"./QImg.97e5179e.js";import{u as F,C as L,B as R}from"./BigSpinner.2e1aebfa.js";import{f as j}from"./currency.2af12bed.js";import{_ as G}from"./ConfirmDialog.18cc0810.js";import{_ as H}from"./NoData.edd95232.js";import{c as W}from"./fuzzy-search.950e6fed.js";import"./use-dark.f3cc31f6.js";import"./focus-manager.05708ea9.js";import"./QList.bd3b2319.js";import"./QSelect.ca5ceab2.js";import"./QChip.87f087fd.js";import"./QItemLabel.088c8266.js";import"./QMenu.b9d6bbc5.js";import"./position-engine.039e47cb.js";import"./portal.1e339704.js";import"./QDialog.c45abf5d.js";import"./focusout.5531236c.js";import"./use-checkbox.ebd68424.js";import"./use-fullscreen.1e562930.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./QCardSection.d98f4e99.js";import"./QCard.6ae2900c.js";import"./ClosePopup.0c7c1e33.js";const Z={class:"text-weight-bold"},ke=Q({__name:"AdminModifications",setup(J){const c=D(),y=s(()=>c.state.modifications.modifications),h=s(()=>W(y.value,["name","price","weight"])),S=s(()=>h.value.search(u.value)),C=s(()=>[L.MODIFICATIONS]);let k=F(C,{store:c});const o=M(),i=p(null),d=p(!1),u=p(""),x=[{name:"index",label:"#",field:"index",align:"center"},{name:"image",label:o.value.image,align:"center",field:"imageUrl"},{name:"name",label:o.value.name,align:"center",field:"name",sortable:!0},{name:"price",label:o.value.price,align:"center",field:"price",sortable:!0,format:n=>j(n,!1)},{name:"weight",label:o.value.weight,align:"center",field:"weight",sortable:!0},{name:"actions",label:"",align:"right"}],B=n=>{i.value=n},I=()=>{V(i.value,"");const n=i.value.id;i.value=null,d.value=!0,c.commit.sync(z({id:n})).then(()=>{U.create({type:"positive",position:"top",timeout:P,message:o.value.deleteSuccess,multiLine:!0,group:!1})}).finally(()=>{d.value=!1})};return(n,r)=>(f(),A("div",null,[l(k)?(f(),_(R,{key:0})):(f(),_(q,{key:1,class:"q-mx-auto max-w-xl sticky-last-column-table",rows:S.value,columns:x,"row-key":"id","binary-state-sort":"","rows-per-page-label":l(o).perPage,loading:d.value,pagination:{rowsPerPage:l(N)}},{"top-right":t(()=>[a($,{dense:"",modelValue:u.value,"onUpdate:modelValue":r[0]||(r[0]=e=>u.value=e),placeholder:l(o).search,class:"q-mr-lg q-my-sm"},{append:t(()=>[a(E,{name:"search"})]),_:1},8,["modelValue","placeholder"]),a(m,{color:"primary",icon:"add",label:l(o).addModification,to:"/admin/modifications/create"},null,8,["label"])]),"body-cell-index":t(e=>[a(v,{props:e},{default:t(()=>[g(b(e.rowIndex+1),1)]),_:2},1032,["props"])]),"body-cell-image":t(e=>[a(v,{props:e},{default:t(()=>[a(O,{src:e.row.imageUrl,fit:"cover",class:"rounded-borders image-sm",alt:e.row.name},null,8,["src","alt"])]),_:2},1032,["props"])]),"body-cell-actions":t(e=>[a(v,{props:e,"auto-width":""},{default:t(()=>[a(m,{flat:"",size:"md",icon:"mode_edit",color:"primary",dense:"",class:"q-mr-sm",onClick:r[1]||(r[1]=w(()=>{},["stop"])),to:`/admin/modifications/update/${e.row.id}`},null,8,["to"]),a(m,{flat:"",size:"md",icon:"o_delete",color:"negative",dense:"",onClick:w(K=>B(e.row),["stop"])},null,8,["onClick"])]),_:2},1032,["props"])]),"no-data":t(()=>[a(H)]),_:1},8,["rows","rows-per-page-label","loading","pagination"])),a(G,{"model-value":!!i.value,"onUpdate:modelValue":r[2]||(r[2]=e=>i.value=null)},{body:t(()=>{var e;return[g(b(l(o).confirmModificationDelete)+" ",1),T("span",Z,'"'+b(((e=i.value)==null?void 0:e.name)||"")+'"',1),g("? ")]}),confirmButton:t(()=>[a(m,{flat:"",label:l(o).deleteButton,color:"negative",onClick:I},null,8,["label"])]),_:1},8,["model-value"])]))}});export{ke as default};
