import{Q as x}from"./QSpace.472bcaca.js";import{be as u,d as M,h as b,u as P,r as m,a as T,a8 as $,J as I,H as C,e as O,w as r,o as Y,k as l,j as i,t as n,a5 as j,n as S,g as t,bP as F,f as h,aA as K,aB as G}from"./index.1c3783dc.js";import{Q as _}from"./QCardSection.ef6e6dbe.js";import{Q as c}from"./QInput.e35961c4.js";import{Q as H}from"./QTooltip.a983157c.js";import{Q as J,o as X}from"./on-form-validation-error.73894483.js";import{Q as Z}from"./QCard.5aa3fe54.js";import{Q as W}from"./QDialog.69ef5705.js";import{C as ee}from"./ClosePopup.76c7f815.js";import{m as se}from"./address.94d37a80.js";u("addresses/loaded");const te=u("addresses/create");u("addresses/created");const ae=u("addresses/update");u("addresses/updated");const Ae=u("addresses/delete");u("addresses/deleted");const le={class:"text-h6"},oe={class:"text-body1 text-dark-gray q-mb-lg"},de={class:"address-inputs"},re=["src"],w="https://www.google.com/maps/embed/v1/search?key=AIzaSyA4wNwpARhZ7Y4FKCclfAwqLgxjKhACi0g",Q=14,ie="Pinczow",Ve=M({__name:"AddAddressModal",props:{submitYourself:{type:Boolean},originalAddress:{}},emits:["submit"],setup(k,{emit:q}){const v=k,y=q,d=b(()=>v.originalAddress),E=b(()=>d.value?e.value.editAddress:e.value.addAddress),z=b(()=>v.submitYourself),e=P(),N=ie,B=w+"&q="+N+"&zoom="+Q,g=m(B),R=T(),p=m(!1),A=m(!1),f=m(),a=$({city:"",street:"",homeNumber:"",postalCode:""}),U=I(()=>{D()},500);C(a,()=>{U()}),C(d,()=>{!d.value||Object.assign(a,d.value)},{immediate:!0});async function D(){const V=await f.value.validate(!1);if(A.value||f.value.resetValidation(),!V)return;const o=se(a);g.value=w+"&q="+o+"&zoom="+Q}function L(){if(!z.value){y("submit",a);return}p.value=!0,R.commit.sync(d.value?ae({id:d.value.id||"",address:a}):te({address:a})).then(()=>{K.create({type:"positive",position:"top",timeout:G,message:d.value?e.value.updateSuccess:e.value.createSuccess,multiLine:!0,group:!1}),y("submit",a)}).finally(()=>{p.value=!1})}return(V,o)=>(Y(),O(W,null,{default:r(()=>[l(Z,{class:"q-pb-sm dialog-md"},{default:r(()=>[l(_,{class:"row items-center"},{default:r(()=>[l(x),i("div",le,n(E.value),1),l(x),j(l(S,{icon:"close",flat:"",round:"",dense:"",title:t(e).close},null,8,["title"]),[[ee]])]),_:1}),l(_,null,{default:r(()=>[i("div",oe,[i("p",null,n(t(e).addressExplanation1),1),i("p",null,n(t(e).addressExplanation2),1)]),l(J,{onSubmit:L,onValidationError:t(X),ref_key:"form",ref:f},{default:r(()=>[i("div",de,[l(c,{modelValue:a.city,"onUpdate:modelValue":o[0]||(o[0]=s=>a.city=s),"stack-label":"",label:`${t(e).city} *`,"lazy-rules":"",type:"text",rules:[s=>!!s||t(e).fieldRequired]},null,8,["modelValue","label","rules"]),l(c,{modelValue:a.street,"onUpdate:modelValue":o[1]||(o[1]=s=>a.street=s),"stack-label":"",label:`${t(e).street} *`,"lazy-rules":"",type:"text",rules:[s=>!!s||t(e).fieldRequired]},null,8,["modelValue","label","rules"]),l(c,{modelValue:a.homeNumber,"onUpdate:modelValue":o[2]||(o[2]=s=>a.homeNumber=s),"stack-label":"",label:`${t(e).homeNumber} *`,"lazy-rules":"",type:"text",rules:[s=>!!s||t(e).fieldRequired]},null,8,["modelValue","label","rules"]),l(c,{modelValue:a.postalCode,"onUpdate:modelValue":o[3]||(o[3]=s=>a.postalCode=s),"stack-label":"",mask:"##-###",label:`${t(e).postalCode} *`,"lazy-rules":"",type:"text",rules:[s=>!!s||t(e).fieldRequired,s=>t(F).test(s)||t(e).invalidPostalCode]},null,8,["modelValue","label","rules"])]),i("div",null,[i("iframe",{class:"q-mt-lg no-events",src:g.value,width:"100%",height:"400px",title:"map"},`
            `,8,re),l(H,{anchor:"center middle",self:"center middle",class:"bg-negative text-white text-body2"},{default:r(()=>[h(n(t(e).readonlyMap),1)]),_:1})]),l(S,{color:"primary",class:"d-block q-mx-auto q-mt-md",type:"submit",loading:p.value,onClick:o[4]||(o[4]=s=>A.value=!0)},{default:r(()=>[h(n(t(e).save),1)]),_:1},8,["loading"])]),_:1},8,["onValidationError"])]),_:1})]),_:1})]),_:1}))}});export{Ve as _,Ae as d};
