import{Q as x}from"./QInput.d2bf4b4c.js";import{d as A,a as U,r,u as S,c as E,bY as Q,h as w,i as V,j as u,t as n,g as t,ah as C,k as s,w as i,cl as L,o as b,bE as y,bF as N,n as M,f as R,aG as T}from"./index.20f37243.js";import{Q as F}from"./QCardSection.8c2ff0bc.js";import{Q as I}from"./QCard.4f0de502.js";import{Q as $,o as B}from"./on-form-validation-error.c4beaa36.js";import{_ as G}from"./EmailInput.ad218d87.js";import{_ as H}from"./PasswordInput.877a1289.js";import{_ as z}from"./PhoneInput.b1fc8afc.js";import{a as O}from"./create-order.e3afef42.js";import"./use-dark.670a0b2a.js";import"./focus-manager.05708ea9.js";const X={class:"q-pa-md bg-gray-lightest min-height-window"},j={class:"q-my-xl text-center text-dark-lighter"},D={class:"text-h3"},Y={key:0,class:"text-h6"},J={class:"q-mt-xl"},K={class:"text-center text-h6 q-mt-xl text-weight-regular"},ie=A({__name:"ClientSignUp",setup(P){const o=U(),m=r(!1),l=S(),h=E(),d=r(""),c=r(""),p=r(""),f=r(""),g=r(""),q=Q(),v=w(()=>{var _,a;return l.value[((a=(_=q.query)==null?void 0:_.text)==null?void 0:a.toString())||""]||""}),k=async()=>{m.value=!0,o.commit.sync(L({email:d.value,phone:c.value,password:p.value,firstName:f.value,lastName:g.value})).then(()=>(o.client.changeUser(o.state.auth.user.userId||"",o.state.auth.user.accessToken||""),o.state.orders.createOrderAfterAuth?O(o,l,h):h.push("/"))).finally(()=>{m.value=!1})};return(_,a)=>(b(),V("div",X,[u("div",null,[u("div",j,[u("h1",D,n(t(l).signUp),1),v.value?(b(),V("p",Y,n(v.value),1)):C("",!0)]),s($,{onSubmit:k,class:"max-w-sm q-mx-auto",onValidationError:t(B)},{default:i(()=>[s(I,{class:"q-pa-md"},{default:i(()=>[s(F,{class:"q-gutter-lg"},{default:i(()=>[s(x,{modelValue:f.value,"onUpdate:modelValue":a[0]||(a[0]=e=>f.value=e),modelModifiers:{trim:!0},"stack-label":"",label:`${t(l).firstName} *`,"lazy-rules":"",type:"text",rules:[e=>!!e&&e.length>0||t(l).fieldRequired,e=>e.length<=t(y)||t(l).maxLength({max:t(y)})]},null,8,["modelValue","label","rules"]),s(x,{modelValue:g.value,"onUpdate:modelValue":a[1]||(a[1]=e=>g.value=e),modelModifiers:{trim:!0},"stack-label":"",label:`${t(l).lastName} *`,"lazy-rules":"",type:"text",rules:[e=>!!e&&e.length>0||t(l).fieldRequired,e=>e.length<=t(N)||t(l).maxLength({max:t(N)})]},null,8,["modelValue","label","rules"]),s(G,{modelValue:d.value,"onUpdate:modelValue":a[2]||(a[2]=e=>d.value=e)},null,8,["modelValue"]),s(z,{modelValue:c.value,"onUpdate:modelValue":a[3]||(a[3]=e=>c.value=e),shouldValidateFormat:""},null,8,["modelValue"]),s(H,{modelValue:p.value,"onUpdate:modelValue":a[4]||(a[4]=e=>p.value=e),"should-validate-format":!0,required:""},null,8,["modelValue"]),u("div",J,[s(M,{label:t(l).signUp,loading:m.value,type:"submit",color:"primary",class:"q-mx-auto d-block"},null,8,["label","loading"])])]),_:1})]),_:1})]),_:1},8,["onValidationError"])]),u("div",K,[u("p",null,n(t(l).alreadyHaveAccount),1),s(t(T),{class:"link",to:"/login"},{default:i(()=>[R(n(t(l).logIn),1)]),_:1})])]))}});export{ie as default};
