import{d as C,a as Q,h as r,u as D,r as p,o as f,i as I,g as i,e as _,w as t,k as a,Q as E,n as m,f as b,t as g,a_ as y,a$ as A,j as V,aQ as z,bB as $,aw as P,ax as U}from"./index.92b1981f.js";import{Q as q}from"./QInput.7bd0947e.js";import{Q as L,a as v}from"./QTable.f17bfb21.js";import{Q as M}from"./QImg.d5d2e26d.js";import{u as G,C as O,B as R}from"./BigSpinner.23930169.js";import{_ as j}from"./ConfirmDialog.b785605a.js";import{_ as F}from"./NoData.b4eb18ee.js";import{c as H}from"./fuzzy-search.950e6fed.js";import"./use-dark.f27ed271.js";import"./focus-manager.05708ea9.js";import"./QList.8f8ed760.js";import"./QSelect.c3432e18.js";import"./QChip.ac7925f0.js";import"./QItemLabel.e8e8f6f6.js";import"./QMenu.27788fe4.js";import"./position-engine.f880795b.js";import"./QDialog.cd420016.js";import"./focusout.ff3e1aa2.js";import"./format.2a3572e1.js";import"./use-checkbox.06902cdf.js";import"./use-fullscreen.5835c99e.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./QCardSection.6b30cd69.js";import"./QCard.05af6174.js";import"./ClosePopup.0403f3f3.js";const W={class:"text-weight-bold"},he=C({__name:"AdminDiningTables",setup(J){const u=Q(),w=r(()=>u.state.diningTables.tables),S=r(()=>H(w.value,["number","employee.firstName","employee.lastName"])),h=r(()=>S.value.search(d.value)),k=r(()=>[O.DINING_TABLES]);let x=G(k,{store:u});const n=D(),s=p(null),c=p(!1),d=p(""),B=[{name:"index",label:"#",field:"index",align:"center"},{name:"number",label:n.value.table,align:"center",field:l=>l.number},{name:"waiter",label:n.value.waiter,align:"center",field:l=>{var o,e;return((o=l.employee)==null?void 0:o.lastName)+" "+((e=l.employee)==null?void 0:e.firstName)}},{name:"actions",label:"",align:"right"}],N=l=>{s.value=l},T=()=>{z(s.value,"");const l=s.value.id;s.value=null,c.value=!0,u.commit.sync($({id:l})).then(()=>{P.create({type:"positive",position:"top",timeout:U,message:n.value.deleteSuccess,multiLine:!0,group:!1})}).finally(()=>{c.value=!1})};return(l,o)=>(f(),I("div",null,[i(x)?(f(),_(R,{key:0})):(f(),_(L,{key:1,class:"q-mx-auto max-w-lg sticky-last-column-table",rows:h.value,columns:B,"row-key":"id","rows-per-page-label":i(n).perPage,loading:c.value,"binary-state-sort":"",pagination:{rowsPerPage:i(A)}},{"top-right":t(()=>[a(q,{dense:"",modelValue:d.value,"onUpdate:modelValue":o[0]||(o[0]=e=>d.value=e),placeholder:i(n).search,class:"q-mr-lg q-my-sm"},{append:t(()=>[a(E,{name:"search"})]),_:1},8,["modelValue","placeholder"]),a(m,{color:"primary",icon:"add",label:i(n).addTable,to:"/admin/dining-tables/create"},null,8,["label"])]),"body-cell-index":t(e=>[a(v,{props:e},{default:t(()=>[b(g(e.rowIndex+1),1)]),_:2},1032,["props"])]),"body-cell-image":t(e=>[a(v,{props:e},{default:t(()=>[a(M,{src:e.row.imageUrl,fit:"cover",class:"rounded-borders image-sm"},null,8,["src"])]),_:2},1032,["props"])]),"body-cell-actions":t(e=>[a(v,{props:e,"auto-width":""},{default:t(()=>[a(m,{flat:"",size:"md",icon:"mode_edit",color:"primary",dense:"",class:"q-mr-sm",onClick:o[1]||(o[1]=y(()=>{},["stop"])),to:`/admin/dining-tables/update/${e.row.id}`},null,8,["to"]),a(m,{flat:"",size:"md",icon:"o_delete",color:"negative",dense:"",onClick:y(K=>N(e.row),["stop"])},null,8,["onClick"])]),_:2},1032,["props"])]),"no-data":t(()=>[a(F)]),_:1},8,["rows","rows-per-page-label","loading","pagination"])),a(j,{"model-value":!!s.value,"onUpdate:modelValue":o[2]||(o[2]=e=>s.value=null)},{body:t(()=>{var e;return[b(g(i(n).confirmTableDelete)+" ",1),V("span",W,'"'+g(((e=s.value)==null?void 0:e.number)||"")+'"',1),b("? ")]}),confirmButton:t(()=>[a(m,{flat:"",label:i(n).deleteButton,color:"negative",onClick:T},null,8,["label"])]),_:1},8,["model-value"])]))}});export{he as default};
