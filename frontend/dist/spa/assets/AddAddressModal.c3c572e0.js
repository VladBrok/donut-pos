import{Q as V}from"./QSpace.8488b32a.js";import{bf as n,d as M,h as b,u as T,r as m,a as $,a8 as I,J as O,H as x,e as P,w as r,o as Y,k as l,j as i,t as u,a5 as j,n as S,g as t,bQ as F,f as h,aB as K,aC as G}from"./index.0dcec281.js";import{Q as _}from"./QCardSection.d98f4e99.js";import{Q as c}from"./QInput.3643c48a.js";import{Q as H,o as J}from"./on-form-validation-error.720cb8a3.js";import{Q as X}from"./QCard.6ae2900c.js";import{Q as Z}from"./QDialog.c45abf5d.js";import{C as W}from"./ClosePopup.0c7c1e33.js";import{C as ee}from"./CommonTooltip.9835515d.js";import{m as se}from"./address.b5e3391c.js";n("addresses/loaded");const te=n("addresses/create");n("addresses/created");const ae=n("addresses/update");n("addresses/updated");const Ae=n("addresses/delete");n("addresses/deleted");const le={class:"text-h6"},oe={class:"text-body1 text-dark-gray q-mb-lg"},de={class:"address-inputs"},re=["src"],w="https://www.google.com/maps/embed/v1/search?key=AIzaSyA4wNwpARhZ7Y4FKCclfAwqLgxjKhACi0g",k=14,ie="Pinczow",Ce=M({__name:"AddAddressModal",props:{submitYourself:{type:Boolean},originalAddress:{}},emits:["submit"],setup(Q,{emit:q}){const v=Q,y=q,d=b(()=>v.originalAddress),E=b(()=>d.value?e.value.editAddress:e.value.addAddress),z=b(()=>v.submitYourself),e=T(),N=ie,B=w+"&q="+N+"&zoom="+k,g=m(B),R=$(),p=m(!1),A=m(!1),f=m(),a=I({city:"",street:"",homeNumber:"",postalCode:""}),U=O(()=>{D()},500);x(a,()=>{U()}),x(d,()=>{!d.value||Object.assign(a,d.value)},{immediate:!0});async function D(){const C=await f.value.validate(!1);if(A.value||f.value.resetValidation(),!C)return;const o=se(a);g.value=w+"&q="+o+"&zoom="+k}function L(){if(!z.value){y("submit",a);return}p.value=!0,R.commit.sync(d.value?ae({id:d.value.id||"",address:a}):te({address:a})).then(()=>{K.create({type:"positive",position:"top",timeout:G,message:d.value?e.value.updateSuccess:e.value.createSuccess,multiLine:!0,group:!1}),y("submit",a)}).finally(()=>{p.value=!1})}return(C,o)=>(Y(),P(Z,null,{default:r(()=>[l(X,{class:"q-pb-sm dialog-md"},{default:r(()=>[l(_,{class:"row items-center"},{default:r(()=>[l(V),i("div",le,u(E.value),1),l(V),j(l(S,{icon:"close",flat:"",round:"",dense:"",title:t(e).close},null,8,["title"]),[[W]])]),_:1}),l(_,null,{default:r(()=>[i("div",oe,[i("p",null,u(t(e).addressExplanation1),1),i("p",null,u(t(e).addressExplanation2),1)]),l(H,{onSubmit:L,onValidationError:t(J),ref_key:"form",ref:f},{default:r(()=>[i("div",de,[l(c,{modelValue:a.city,"onUpdate:modelValue":o[0]||(o[0]=s=>a.city=s),"stack-label":"",label:`${t(e).city} *`,"lazy-rules":"",type:"text",rules:[s=>!!s||t(e).fieldRequired]},null,8,["modelValue","label","rules"]),l(c,{modelValue:a.street,"onUpdate:modelValue":o[1]||(o[1]=s=>a.street=s),"stack-label":"",label:`${t(e).street} *`,"lazy-rules":"",type:"text",rules:[s=>!!s||t(e).fieldRequired]},null,8,["modelValue","label","rules"]),l(c,{modelValue:a.homeNumber,"onUpdate:modelValue":o[2]||(o[2]=s=>a.homeNumber=s),"stack-label":"",label:`${t(e).homeNumber} *`,"lazy-rules":"",type:"text",rules:[s=>!!s||t(e).fieldRequired]},null,8,["modelValue","label","rules"]),l(c,{modelValue:a.postalCode,"onUpdate:modelValue":o[3]||(o[3]=s=>a.postalCode=s),"stack-label":"",mask:"##-###",label:`${t(e).postalCode} *`,"lazy-rules":"",type:"text",rules:[s=>!!s||t(e).fieldRequired,s=>t(F).test(s)||t(e).invalidPostalCode]},null,8,["modelValue","label","rules"])]),i("div",null,[i("iframe",{class:"q-mt-lg no-events",src:g.value,width:"100%",height:"400px",title:"map"},`
            `,8,re),l(ee,{anchor:"center middle",self:"center middle",class:"bg-negative text-white text-body2"},{default:r(()=>[h(u(t(e).readonlyMap),1)]),_:1})]),l(S,{color:"primary",class:"d-block q-mx-auto q-mt-md",type:"submit",loading:p.value,onClick:o[4]||(o[4]=s=>A.value=!0)},{default:r(()=>[h(u(t(e).save),1)]),_:1},8,["loading"])]),_:1},8,["onValidationError"])]),_:1})]),_:1})]),_:1}))}});export{Ce as _,Ae as d};
