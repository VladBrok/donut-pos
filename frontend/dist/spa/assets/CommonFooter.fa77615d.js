import{p as F,G as X,X as I,h as v,Y as J,q as p,Q as j,s as P,ax as z,x as W,v as Z,d as Q,u as x,e as g,w as n,o as u,i as q,ai as G,g as l,aj as N,ay as S,k as o,a5 as R,f as k,t as _,ah as C,r as ee,a as K,az as O,j as r,n as T,ak as te,aA as le}from"./index.4cce736f.js";import{Q as E}from"./QInput.d6c33dc7.js";import{Q as $}from"./QTooltip.9bedcaa0.js";import{Q as ae}from"./NoData.6380666a.js";import{g as oe,a as se,b as ne}from"./get-order-total-cost.5554df13.js";import{g as ie,_ as re}from"./get-order-type-icon.86c1179a.js";import{u as ce,a as de}from"./use-dark.e2ec4b55.js";import{f as ue,s as me}from"./date.b6f3ce26.js";import{_ as pe}from"./OrderView.41e3a9f2.js";import{_ as fe}from"./PaymentMethodsModal.35077e3f.js";import{a as V,Q as A,b as U}from"./QItemLabel.cd716551.js";import{Q as _e}from"./QList.1a5a7c5e.js";import{Q as ve}from"./QBtnDropdown.3f989edb.js";import{C as M}from"./ClosePopup.fb3bc6eb.js";import{f as Y,m as H}from"./address.b5e3391c.js";import{u as ye,C as he}from"./BigSpinner.06e3b354.js";import{_ as be}from"./LogoImage.293526c5.js";import{f as ge}from"./phone.158664be.js";function we(e){return(e==null?void 0:e.dishes.reduce((a,t)=>a+t.count,0))||0}var ke=F({name:"QTimelineEntry",props:{heading:Boolean,tag:{type:String,default:"h3"},side:{type:String,default:"right",validator:e=>["left","right"].includes(e)},icon:String,avatar:String,color:String,title:String,subtitle:String,body:String},setup(e,{slots:a}){const t=X(z,I);if(t===I)return console.error("QTimelineEntry needs to be child of QTimeline"),I;const f=v(()=>`q-timeline__entry q-timeline__entry--${e.side}`+(e.icon!==void 0||e.avatar!==void 0?" q-timeline__entry--icon":"")),s=v(()=>`q-timeline__dot text-${e.color||t.color}`),c=v(()=>t.layout==="comfortable"&&t.side==="left");return()=>{const d=J(a.default,[]);if(e.body!==void 0&&d.unshift(e.body),e.heading===!0){const h=[p("div"),p("div"),p(e.tag,{class:"q-timeline__heading-title"},d)];return p("div",{class:"q-timeline__heading"},c.value===!0?h.reverse():h)}let y;e.icon!==void 0?y=[p(j,{class:"row items-center justify-center",name:e.icon})]:e.avatar!==void 0&&(y=[p("img",{class:"q-timeline__dot-img",src:e.avatar})]);const i=[p("div",{class:"q-timeline__subtitle"},[p("span",{},P(a.subtitle,[e.subtitle]))]),p("div",{class:s.value},y),p("div",{class:"q-timeline__content"},[p("h6",{class:"q-timeline__title"},P(a.title,[e.title]))].concat(d))];return p("li",{class:f.value},c.value===!0?i.reverse():i)}}}),Se=F({name:"QTimeline",props:{...ce,color:{type:String,default:"primary"},side:{type:String,default:"right",validator:e=>["left","right"].includes(e)},layout:{type:String,default:"dense",validator:e=>["dense","comfortable","loose"].includes(e)}},setup(e,{slots:a}){const t=Z(),f=de(e,t.proxy.$q);W(z,e);const s=v(()=>`q-timeline q-timeline--${e.layout} q-timeline--${e.layout}--${e.side}`+(f.value===!0?" q-timeline--dark":""));return()=>p("ul",{class:s.value},P(a.default))}});const qe=Q({__name:"OrderHistory",props:{order:{}},setup(e){const a=e,t=v(()=>{const s=a.order,d=[[s.createdDate,S.CREATED],[s.cookingDate,S.COOKING],[s.cookedDate,S.COOKED],[s.deliveringDate,S.DELIVERING],[s.deliveredDate,S.DELIVERED],[s.paidDate,S.PAID]].filter(i=>Boolean(i[0]));return me(d,i=>i[0]).map(i=>({date:i[0],name:i[1]}))}),f=x();return(s,c)=>(u(),g(Se,{class:"w-fit"},{default:n(()=>[(u(!0),q(N,null,G(t.value,(d,y)=>(u(),g(ke,{key:y,title:l(f)[`orderStatus_${d.name}`],subtitle:l(ue)(d.date),color:d.name},null,8,["title","subtitle","color"]))),128))]),_:1}))}}),De=Q({__name:"PrintButton",props:{allowPrintTicket:{type:Boolean}},setup(e){const a=x();function t(){console.log("print ticket")}function f(){console.log("print receipt")}return(s,c)=>(u(),g(ve,{color:"primary",label:l(a).print,icon:"print",outline:""},{default:n(()=>[o(_e,null,{default:n(()=>[s.allowPrintTicket?R((u(),g(V,{key:0,clickable:"",onClick:t},{default:n(()=>[o(A,null,{default:n(()=>[o(U,null,{default:n(()=>[k(_(l(a).printTicket),1)]),_:1})]),_:1})]),_:1})),[[M]]):C("",!0),R((u(),g(V,{clickable:"",onClick:f},{default:n(()=>[o(A,null,{default:n(()=>[o(U,null,{default:n(()=>[k(_(l(a).printReceipt),1)]),_:1})]),_:1})]),_:1})),[[M]])]),_:1})]),_:1},8,["label"]))}}),Ce={class:"flex-basis-50"},Te={key:0,class:"row justify-center"},lt=Q({__name:"OrderDetailsView",props:{order:{},fullScreen:{type:Boolean}},setup(e){const a=e,t=v(()=>a.order),f=v(()=>se(t.value)),s=v(()=>ne(t.value)),c=x(),d=ee(!1),y=K(),i=v(()=>{var m;return(m=y.state.auth.user.permissions)==null?void 0:m.client});function h(){var m;(m=window==null?void 0:window.open(`http://www.google.com/maps/place?q=${H(t.value.address)}`,"_blank"))==null||m.focus()}return(m,w)=>(u(),q(N,null,[o(pe,{"has-content":Boolean(t.value),"dish-count":l(we)(t.value),"total-cost":f.value,"delivery-cost":l(le),"dish-cost":s.value,"full-content-height":m.fullScreen,"card-padding":m.fullScreen,"apply-shadow":m.fullScreen,"order-type":t.value.type},{content:n(()=>{var b,B;return[i.value?C("",!0):(u(),g(De,{key:0,class:"q-mb-md","allow-print-ticket":t.value.type===l(O).TAKEOUT},null,8,["allow-print-ticket"])),r("div",null,[r("div",null,[o(E,{"stack-label":"",readonly:"","model-value":(b=l(c)[`orderType_${t.value.type}`])==null?void 0:b.toString(),type:"text",label:l(c).orderTypeLabel,class:"q-mb-md"},{before:n(()=>[o(j,{name:l(ie)(t.value.type)},null,8,["name"])]),_:1},8,["model-value","label"]),t.value.type===l(O).DELIVERY?(u(),g(E,{key:0,"model-value":l(Y)(t.value.address),readonly:"","stack-label":"",label:`${l(c).deliveryAddress}`,type:"text",class:"q-mb-md w-fit"},{after:n(()=>[o(T,{round:"",dense:"",icon:"location_on",color:"primary",onClick:h,title:l(c).showOnMap},{default:n(()=>[o($,null,{default:n(()=>[k(_(l(c).showOnMap),1)]),_:1})]),_:1},8,["title"])]),_:1},8,["model-value","label"])):C("",!0),t.value.type===l(O).DINE_IN?(u(),g(E,{key:1,"model-value":((B=t.value.table)==null?void 0:B.number)||"-",readonly:"","stack-label":"",label:`${l(c).tableNumberLabel}`,type:"text",class:"q-mb-md"},null,8,["model-value","label"])):C("",!0),o(E,{"model-value":t.value.comment||"-","stack-label":"",label:`${l(c).commentLabel}`,type:"textarea",readonly:"",rows:"1",autogrow:"",class:"q-mb-md"},null,8,["model-value","label"])]),r("div",{class:te(["no-wrap",{"order-details-flex":m.fullScreen}])},[r("div",Ce,[(u(!0),q(N,null,G(t.value.dishes,D=>(u(),q("div",{key:D.dishIdInOrder},[o(re,{dish:D,count:D.count,"total-cost":l(oe)(D),modifications:D.modifications.map(L=>({count:L.count,modification:L})),"view-only":""},null,8,["dish","count","total-cost","modifications"]),o(ae)]))),128))]),o(qe,{class:"q-mt-xl",order:t.value},null,8,["order"])],2)])]}),options:n(()=>[t.value.paidDate?C("",!0):(u(),q("div",Te,[o(T,{color:"primary",type:"submit",onClick:w[0]||(w[0]=b=>d.value=!0),class:"q-px-lg q-py-xs",size:"md"},{default:n(()=>[k(_(l(c).pay),1)]),_:1})]))]),_:1},8,["has-content","dish-count","total-cost","delivery-cost","dish-cost","full-content-height","card-padding","apply-shadow","order-type"]),o(fe,{modelValue:d.value,"onUpdate:modelValue":w[1]||(w[1]=b=>d.value=b),"total-cost":f.value,"order-number":t.value.orderNumber,"order-id":t.value.id,"order-type":t.value.type},null,8,["modelValue","total-cost","order-number","order-id","order-type"])],64))}}),Ee={class:"bg-white shadow-up-1 q-px-md q-py-md"},$e={class:"row gap-md"},Qe={class:"row items-center q-pl-sm",style:{flex:"0 0 25%"}},xe={style:{flex:"0 0 35%"},class:"row items-center"},Ie={class:"row no-wrap items-center gap-xs q-mb-sm"},Oe={class:"row no-wrap items-center gap-xs q-mb-sm"},Pe={class:"row no-wrap items-center gap-xs"},Ne={style:{flex:"1 0 35%"},class:"row items-center"},Be={class:"text-weight-bold"},Le={class:"text-dark-lighter"},at=Q({__name:"CommonFooter",setup(e){const a=x(),t=K(),f=v(()=>[he.DEFAULT_SALE_POINT]);ye(f,{store:t});const s=v(()=>t.state.salePoints.defaultSalePoint);function c(){var i,h;(h=window==null?void 0:window.open(`http://www.google.com/maps/place?q=${H((i=s.value)==null?void 0:i.address)}`,"_blank"))==null||h.focus()}function d(){var i;window==null||window.open(`tel:${(i=s.value)==null?void 0:i.phone}`)}function y(){var i;window==null||window.open(`mailto:${(i=s.value)==null?void 0:i.email}`)}return(i,h)=>{var m,w,b;return u(),q("footer",Ee,[r("div",$e,[r("div",Qe,[o(be,{style:{width:"130px"}})]),r("address",xe,[r("div",null,[r("div",Ie,[o(T,{round:"",dense:"",outline:"",icon:"location_on",color:"primary",size:"md",onClick:c,title:l(a).showOnMap},{default:n(()=>[o($,null,{default:n(()=>[k(_(l(a).showOnMap),1)]),_:1})]),_:1},8,["title"]),r("div",null,_(l(Y)((m=s.value)==null?void 0:m.address)),1)]),r("div",Oe,[o(T,{outline:"",round:"",dense:"",icon:"call",color:"primary",onClick:d,title:l(a).callUs},{default:n(()=>[o($,null,{default:n(()=>[k(_(l(a).callUs),1)]),_:1})]),_:1},8,["title"]),r("div",null,_(l(ge)(((w=s.value)==null?void 0:w.phone)||"")),1)]),r("div",Pe,[o(T,{outline:"",round:"",dense:"",icon:"mail",color:"primary",onClick:y,title:l(a).writeUsEmail},{default:n(()=>[o($,null,{default:n(()=>[k(_(l(a).writeUsEmail),1)]),_:1})]),_:1},8,["title"]),r("div",null,_((b=s.value)==null?void 0:b.email),1)])])]),r("div",Ne,[r("div",null,[r("p",Be,_(l(a).donutPosFooterTitle),1),r("p",Le,_(l(a).donutPosFooterDescription),1)])])])])}}});export{lt as _,at as a,we as g};
