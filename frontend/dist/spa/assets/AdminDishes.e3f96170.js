import{d as A,a as B,h as n,u as E,r as f,bn as I,i as N,g as s,e as h,w as t,k as a,o as g,Q as T,n as m,f as v,t as b,b9 as _,ba as V,j as z,aZ as U,aB as P,aC as $}from"./index.3586e908.js";import{Q as q}from"./QInput.ee3e8437.js";import{Q as L,a as c}from"./QTable.1573cdd9.js";import{Q as M}from"./QImg.34cb1bf2.js";import{Q as O}from"./QRadio.0555cb56.js";import{u as R,C as F,B as H}from"./BigSpinner.7feebcdf.js";import{d as j}from"./dishes.1c95a53b.js";import{f as G}from"./currency.2af12bed.js";import{_ as W}from"./ConfirmDialog.b4a3d55c.js";import{_ as Z}from"./NoData.25b7efe9.js";import{c as J}from"./fuzzy-search.950e6fed.js";import"./use-dark.6459b50b.js";import"./focus-manager.05708ea9.js";import"./QList.4cbbf208.js";import"./QSelect.85fe8438.js";import"./QChip.4061286d.js";import"./QItemLabel.10894e09.js";import"./QMenu.84dcf087.js";import"./position-engine.8c9a155e.js";import"./portal.ab0cd572.js";import"./QDialog.c833a3ec.js";import"./focusout.3b4dcc23.js";import"./use-checkbox.d70e13dd.js";import"./use-fullscreen.11382cb9.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./QCardSection.189278d2.js";import"./QCard.d8a05122.js";import"./ClosePopup.5ef12dc6.js";const K={class:"text-weight-bold"},Ae=A({__name:"AdminDishes",setup(X){const d=B(),y=n(()=>d.state.dishes.dishes),w=n(()=>J(y.value,["name","category.name","price","weight"])),S=n(()=>w.value.search(p.value)),k=n(()=>[F.DISHES]);let C=R(k,{store:d});const l=E(),r=f(null),u=f(!1),p=f(""),D=[{name:"index",label:"#",field:"index",align:"center"},{name:"image",label:l.value.image,align:"center",field:"imageUrl"},{name:"name",label:l.value.name,align:"center",field:"name",sortable:!0},{name:"category",label:l.value.category,align:"center",sortable:!0,field:i=>{var o;return((o=i.category)==null?void 0:o.name)||I}},{name:"price",label:l.value.price,align:"center",field:"price",sortable:!0,format:i=>G(i,!1)},{name:"weight",label:l.value.weight,align:"center",field:"weight",sortable:!0},{name:"active",label:l.value.active,align:"center",field:"isActive",sortable:!0},{name:"actions",label:"",align:"right"}],x=i=>{r.value=i},Q=()=>{U(r.value,"");const i=r.value.id;r.value=null,u.value=!0,d.commit.sync(j({id:i})).then(()=>{P.create({type:"positive",position:"top",timeout:$,message:l.value.deleteSuccess,multiLine:!0,group:!1})}).finally(()=>{u.value=!1})};return(i,o)=>(g(),N("div",null,[s(C)?(g(),h(H,{key:0})):(g(),h(L,{key:1,class:"q-mx-auto max-w-xl sticky-last-column-table",rows:S.value,columns:D,"row-key":"id","binary-state-sort":"","rows-per-page-label":s(l).perPage,loading:u.value,pagination:{rowsPerPage:s(V)}},{"top-right":t(()=>[a(q,{dense:"",modelValue:p.value,"onUpdate:modelValue":o[0]||(o[0]=e=>p.value=e),placeholder:s(l).search,class:"q-mr-lg q-my-sm"},{append:t(()=>[a(T,{name:"search"})]),_:1},8,["modelValue","placeholder"]),a(m,{color:"primary",icon:"add",label:s(l).addDish,to:"/admin/dishes/create"},null,8,["label"])]),"body-cell-index":t(e=>[a(c,{props:e},{default:t(()=>[v(b(e.rowIndex+1),1)]),_:2},1032,["props"])]),"body-cell-image":t(e=>[a(c,{props:e},{default:t(()=>[a(M,{src:e.row.imageUrl,fit:"cover",class:"rounded-borders image-sm"},null,8,["src"])]),_:2},1032,["props"])]),"body-cell-active":t(e=>[a(c,{props:e},{default:t(()=>[a(O,{class:"disabled-cursor-default","model-value":"true","checked-icon":"task_alt","unchecked-icon":"close",val:e.row.isActive.toString(),label:"",disable:"",color:e.row.isActive?"positive":"negative","keep-color":""},null,8,["val","color"])]),_:2},1032,["props"])]),"body-cell-actions":t(e=>[a(c,{props:e,"auto-width":""},{default:t(()=>[a(m,{flat:"",size:"md",icon:"mode_edit",color:"primary",dense:"",class:"q-mr-sm",onClick:o[1]||(o[1]=_(()=>{},["stop"])),to:`/admin/dishes/update/${e.row.id}`},null,8,["to"]),a(m,{flat:"",size:"md",icon:"o_delete",color:"negative",dense:"",onClick:_(Y=>x(e.row),["stop"])},null,8,["onClick"])]),_:2},1032,["props"])]),"no-data":t(()=>[a(Z)]),_:1},8,["rows","rows-per-page-label","loading","pagination"])),a(W,{"model-value":!!r.value,"onUpdate:modelValue":o[2]||(o[2]=e=>r.value=null)},{body:t(()=>{var e;return[v(b(s(l).confirmDishDelete)+" ",1),z("span",K,'"'+b(((e=r.value)==null?void 0:e.name)||"")+'"',1),v("? ")]}),confirmButton:t(()=>[a(m,{flat:"",label:s(l).deleteButton,color:"negative",onClick:Q},null,8,["label"])]),_:1},8,["model-value"])]))}});export{Ae as default};
