import{Q}from"./QTooltip.320304f6.js";import{p as T,h as a,q as b,s as h,v as E,d as P,u as V,a as U,r as O,A as R,a9 as W,o as u,e as g,w as r,aC as j,g as o,i as F,ad as M,ae as z,ac as A,k as n,f as B,t as i,n as I,j as m,bP as w,T as H,aB as K,bQ as Y,ch as G}from"./index.92b1981f.js";import{u as J,a as X}from"./use-dark.f27ed271.js";import{Q as Z}from"./QPageSticky.c109b400.js";import{u as ee,C as N}from"./BigSpinner.23930169.js";import{a as te,_ as oe,b as re,c as ne}from"./NotificationsBell.316eeec2.js";import{_ as ae,a as se}from"./MainLayout.220cf993.js";import{u as ie}from"./useIsLoggedIn.aa2c04da.js";import"./position-engine.f880795b.js";import"./focus-manager.05708ea9.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./get-order-total-cost.4c90e68f.js";import"./OrderNumberTitle.45575d71.js";import"./focusout.ff3e1aa2.js";import"./PaymentMethodsModal.85b6b47c.js";import"./QSpace.c26d846a.js";import"./QCardSection.6b30cd69.js";import"./QCard.05af6174.js";import"./QDialog.cd420016.js";import"./ClosePopup.0403f3f3.js";import"./browser.1a1bd576.js";import"./QImg.d5d2e26d.js";import"./QItemLabel.e8e8f6f6.js";import"./QList.8f8ed760.js";import"./QInput.7bd0947e.js";import"./on-form-validation-error.f0562acd.js";import"./currency.2af12bed.js";import"./address.94d37a80.js";import"./capitalize.b0e9fa3f.js";import"./CommonFooter.8bfeea2d.js";import"./NoData.b4eb18ee.js";import"./get-order-type-icon.e7326a30.js";import"./ProductCounter.d6f95ba1.js";import"./date.b6f3ce26.js";import"./dayjs.min.78c0669c.js";import"./OrderView.f2a1e3c0.js";import"./QBtnDropdown.270a56f3.js";import"./QMenu.27788fe4.js";import"./phone.158664be.js";import"./QSelect.c3432e18.js";import"./QChip.ac7925f0.js";import"./format.2a3572e1.js";import"./AddAddressModal.b8e9e24e.js";import"./PhoneInput.74e7b34c.js";import"./create-order.15d87001.js";import"./fuzzy-search.950e6fed.js";import"./ConfirmDialog.b785605a.js";var le=T({name:"QBanner",props:{...J,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(s,{slots:e}){const{proxy:{$q:d}}=E(),k=X(s,d),t=a(()=>"q-banner row items-center"+(s.dense===!0?" q-banner--dense":"")+(k.value===!0?" q-banner--dark q-dark":"")+(s.rounded===!0?" rounded-borders":"")),p=a(()=>`q-banner__actions row items-center justify-end col-${s.inlineActions===!0?"auto":"all"}`);return()=>{const _=[b("div",{class:"q-banner__avatar col-auto row items-center self-start"},h(e.avatar)),b("div",{class:"q-banner__content col text-body2"},h(e.default))],l=h(e.action);return l!==void 0&&_.push(b("div",{class:p.value},l)),b("div",{class:t.value+(s.inlineActions===!1&&l!==void 0?" q-banner--top-padding":""),role:"alert"},_)}}});const ce={class:"text-h5"},ue={class:"text-body1"},me={class:"text-center text-h6 q-mb-sm"},at=P({__name:"ClientLayout",setup(s){const e=V(),d=ie(),k=a(()=>{const c=[{icon:"o_restaurant_menu",label:e.value.menu,to:"/menu",meta:e.value.menu},{icon:"o_receipt_long",label:e.value.orders,to:"/orders",meta:e.value.orders}];return d.value&&c.push({icon:"o_pin_drop",label:e.value.addresses,to:"/addresses",meta:e.value.addresses}),c}),t=U(),p=a(()=>t.state.orderDrawer.isCurrentOrderOpen),_=a(()=>t.state.welcomeBanner.isOpen),l=O(t.state.auth.user),C=O(t.state.auth.user.userId),S=a(()=>C.value===j.userId?[]:[N.COOKED_ORDERS(C.value),N.DEFAULT_SALE_POINT]);let D=ee(S,{store:t});const q=a(()=>t.state.orders.cookedOrders),$=a(()=>q.value.length),x=O(()=>{});R(()=>{x.value=t.client.on("user",c=>{C.value=c})}),W(()=>{x.value()});function L(){p.value?t.commit.local(w()):t.commit.local(Y())}function y(){t.commit.crossTab(G())}return(c,f)=>(u(),g(ae,{"menu-list":k.value},{actions:r(()=>[o(d)?(u(),g(te,{key:0,"is-loading":o(D),"notification-count":$.value},{"notification-list":r(()=>[(u(!0),F(z,null,M(q.value,v=>(u(),g(oe,{key:v.order.id,order:v},null,8,["order"]))),128))]),_:1},8,["is-loading","notification-count"])):A("",!0),n(I,{class:"q-mr-sm shopping-basket",flat:"",round:"",icon:"o_shopping_basket",onClick:L},{default:r(()=>[n(Q,null,{default:r(()=>[B(i(o(e).openCurrentOrder),1)]),_:1}),n(re)]),_:1})]),drawers:r(()=>[n(se,{"model-value":p.value,"onUpdate:modelValue":f[0]||(f[0]=v=>o(t).commit.local(o(w)())),onClose:f[1]||(f[1]=v=>o(t).commit.local(o(w)()))},{title:r(()=>[m("p",ce,i(o(e).currentOrder),1)]),content:r(()=>[n(ne)]),_:1},8,["model-value"]),n(Z,{position:"top",expand:"",style:{"z-index":"12"}},{default:r(()=>[n(H,{tag:"div",name:"fade-single"},{default:r(()=>[_.value?(u(),g(le,{key:0,class:"bg-white banner-border shadow-4",rounded:""},{action:r(()=>[n(I,{flat:"",color:"primary",label:o(e).close,onClick:y},null,8,["label"])]),default:r(()=>[m("div",ue,[m("p",me,i(o(e).welcome({firstName:l.value.firstName||""})),1),m("p",null,i(o(e).chooseDishesInstruction),1),m("p",null,[B(i(o(e).viewOrdersInstruction)+" ",1),n(o(K),{to:"/orders",class:"link",onClick:y},{default:r(()=>[B(i(o(e).ordersPage),1)]),_:1})])])]),_:1})):A("",!0)]),_:1})]),_:1})]),_:1},8,["menu-list"]))}});export{at as default};
