import{Q as C}from"./QSpace.9655fa2d.js";import{bf as u,d as M,h as b,u as T,r as m,a as $,a8 as I,J as O,H as x,e as P,w as r,o as Y,k as l,j as i,t as n,a5 as j,n as S,g as t,bQ as F,f as h,aB as K,aC as G}from"./index.a23228fb.js";import{Q}from"./QCardSection.444a02ed.js";import{Q as c}from"./QInput.8468814f.js";import{Q as H}from"./QTooltip.8df9f225.js";import{Q as J,o as X}from"./on-form-validation-error.b0ec5e9c.js";import{Q as Z}from"./QCard.ad74cc7a.js";import{Q as W}from"./QDialog.7ec1d928.js";import{C as ee}from"./ClosePopup.365cb15f.js";import{m as se}from"./address.94d37a80.js";u("addresses/loaded");const te=u("addresses/create");u("addresses/created");const ae=u("addresses/update");u("addresses/updated");const Ae=u("addresses/delete");u("addresses/deleted");const le={class:"text-h6"},oe={class:"text-body1 text-dark-gray q-mb-lg"},de={class:"address-inputs"},re=["src"],_="https://www.google.com/maps/embed/v1/search?key=AIzaSyA4wNwpARhZ7Y4FKCclfAwqLgxjKhACi0g",w=14,ie="Pinczow",Ve=M({__name:"AddAddressModal",props:{submitYourself:{type:Boolean},originalAddress:{}},emits:["submit"],setup(k,{emit:q}){const v=k,y=q,d=b(()=>v.originalAddress),E=b(()=>d.value?e.value.editAddress:e.value.addAddress),z=b(()=>v.submitYourself),e=T(),N=ie,B=_+"&q="+N+"&zoom="+w,g=m(B),R=$(),p=m(!1),A=m(!1),f=m(),a=I({city:"",street:"",homeNumber:"",postalCode:""}),U=O(()=>{D()},500);x(a,()=>{U()}),x(d,()=>{!d.value||Object.assign(a,d.value)},{immediate:!0});async function D(){const V=await f.value.validate(!1);if(A.value||f.value.resetValidation(),!V)return;const o=se(a);g.value=_+"&q="+o+"&zoom="+w}function L(){if(!z.value){y("submit",a);return}p.value=!0,R.commit.sync(d.value?ae({id:d.value.id||"",address:a}):te({address:a})).then(()=>{K.create({type:"positive",position:"top",timeout:G,message:d.value?e.value.updateSuccess:e.value.createSuccess,multiLine:!0,group:!1}),y("submit",a)}).finally(()=>{p.value=!1})}return(V,o)=>(Y(),P(W,null,{default:r(()=>[l(Z,{class:"q-pb-sm dialog-md"},{default:r(()=>[l(Q,{class:"row items-center"},{default:r(()=>[l(C),i("div",le,n(E.value),1),l(C),j(l(S,{icon:"close",flat:"",round:"",dense:"",title:t(e).close},null,8,["title"]),[[ee]])]),_:1}),l(Q,null,{default:r(()=>[i("div",oe,[i("p",null,n(t(e).addressExplanation1),1),i("p",null,n(t(e).addressExplanation2),1)]),l(J,{onSubmit:L,onValidationError:t(X),ref_key:"form",ref:f},{default:r(()=>[i("div",de,[l(c,{modelValue:a.city,"onUpdate:modelValue":o[0]||(o[0]=s=>a.city=s),"stack-label":"",label:`${t(e).city} *`,"lazy-rules":"",type:"text",rules:[s=>!!s||t(e).fieldRequired]},null,8,["modelValue","label","rules"]),l(c,{modelValue:a.street,"onUpdate:modelValue":o[1]||(o[1]=s=>a.street=s),"stack-label":"",label:`${t(e).street} *`,"lazy-rules":"",type:"text",rules:[s=>!!s||t(e).fieldRequired]},null,8,["modelValue","label","rules"]),l(c,{modelValue:a.homeNumber,"onUpdate:modelValue":o[2]||(o[2]=s=>a.homeNumber=s),"stack-label":"",label:`${t(e).homeNumber} *`,"lazy-rules":"",type:"text",rules:[s=>!!s||t(e).fieldRequired]},null,8,["modelValue","label","rules"]),l(c,{modelValue:a.postalCode,"onUpdate:modelValue":o[3]||(o[3]=s=>a.postalCode=s),"stack-label":"",mask:"##-###",label:`${t(e).postalCode} *`,"lazy-rules":"",type:"text",rules:[s=>!!s||t(e).fieldRequired,s=>t(F).test(s)||t(e).invalidPostalCode]},null,8,["modelValue","label","rules"])]),i("div",null,[i("iframe",{class:"q-mt-lg no-events",src:g.value,width:"100%",height:"400px",title:"map"},`
            `,8,re),l(H,{anchor:"center middle",self:"center middle",class:"bg-negative text-white text-body2"},{default:r(()=>[h(n(t(e).readonlyMap),1)]),_:1})]),l(S,{color:"primary",class:"d-block q-mx-auto q-mt-md",type:"submit",loading:p.value,onClick:o[4]||(o[4]=s=>A.value=!0)},{default:r(()=>[h(n(t(e).save),1)]),_:1},8,["loading"])]),_:1},8,["onValidationError"])]),_:1})]),_:1})]),_:1}))}});export{Ve as _,Ae as d};
