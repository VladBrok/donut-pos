import{Q as x}from"./QInput.7bd0947e.js";import{d as k,a as U,r,u as S,c as Q,bT as w,h as E,o as V,i as b,j as u,t as n,g as t,ac as T,k as s,w as i,aB as C,cg as L,bz as y,bA as N,n as M,f as R}from"./index.92b1981f.js";import{Q as B}from"./QCardSection.6b30cd69.js";import{Q as I}from"./QCard.05af6174.js";import{Q as $,o as F}from"./on-form-validation-error.f0562acd.js";import{_ as z}from"./EmailInput.85c968a4.js";import{_ as H}from"./PasswordInput.830939f2.js";import{_ as G}from"./PhoneInput.74e7b34c.js";import{a as O}from"./create-order.15d87001.js";import"./use-dark.f27ed271.js";import"./focus-manager.05708ea9.js";const X={class:"q-pa-md bg-gray-lightest min-height-window"},j={class:"q-my-xl text-center text-dark-lighter"},D={class:"text-h3"},J={key:0,class:"text-h6"},K={class:"q-mt-xl"},P={class:"text-center text-h6 q-mt-xl text-weight-regular"},ie=k({__name:"ClientSignUp",setup(W){const o=U(),m=r(!1),l=S(),v=Q(),d=r(""),c=r(""),p=r(""),f=r(""),g=r(""),q=w(),h=E(()=>{var _,a;return l.value[(a=(_=q.query)==null?void 0:_.text)==null?void 0:a.toString()]||""}),A=async()=>{m.value=!0,o.commit.sync(L({email:d.value,phone:c.value,password:p.value,firstName:f.value,lastName:g.value})).then(()=>(o.client.changeUser(o.state.auth.user.userId||"",o.state.auth.user.accessToken||""),o.state.orders.createOrderAfterAuth?O(o,l,v):v.push("/"))).finally(()=>{m.value=!1})};return(_,a)=>(V(),b("div",X,[u("div",null,[u("div",j,[u("h1",D,n(t(l).signUp),1),h.value?(V(),b("p",J,n(h.value),1)):T("",!0)]),s($,{onSubmit:A,class:"max-w-sm q-mx-auto",onValidationError:t(F)},{default:i(()=>[s(I,{class:"q-pa-md"},{default:i(()=>[s(B,{class:"q-gutter-lg"},{default:i(()=>[s(x,{modelValue:f.value,"onUpdate:modelValue":a[0]||(a[0]=e=>f.value=e),modelModifiers:{trim:!0},"stack-label":"",label:`${t(l).firstName} *`,"lazy-rules":"",type:"text",rules:[e=>!!e&&e.length>0||t(l).fieldRequired,e=>e.length<=t(y)||t(l).maxLength({max:t(y)})]},null,8,["modelValue","label","rules"]),s(x,{modelValue:g.value,"onUpdate:modelValue":a[1]||(a[1]=e=>g.value=e),modelModifiers:{trim:!0},"stack-label":"",label:`${t(l).lastName} *`,"lazy-rules":"",type:"text",rules:[e=>!!e&&e.length>0||t(l).fieldRequired,e=>e.length<=t(N)||t(l).maxLength({max:t(N)})]},null,8,["modelValue","label","rules"]),s(z,{modelValue:d.value,"onUpdate:modelValue":a[2]||(a[2]=e=>d.value=e)},null,8,["modelValue"]),s(G,{modelValue:c.value,"onUpdate:modelValue":a[3]||(a[3]=e=>c.value=e),shouldValidateFormat:""},null,8,["modelValue"]),s(H,{modelValue:p.value,"onUpdate:modelValue":a[4]||(a[4]=e=>p.value=e),"should-validate-format":!0,required:""},null,8,["modelValue"]),u("div",K,[s(M,{label:t(l).signUp,loading:m.value,type:"submit",color:"primary",class:"q-mx-auto d-block"},null,8,["label","loading"])])]),_:1})]),_:1})]),_:1},8,["onValidationError"])]),u("div",P,[u("p",null,n(t(l).alreadyHaveAccount),1),s(t(C),{class:"link",to:"/login"},{default:i(()=>[R(n(t(l).logIn),1)]),_:1})])]))}});export{ie as default};
