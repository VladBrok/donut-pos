import{d as U,a as P,h as u,u as M,r as n,o as c,i as O,g as r,e as f,w as t,k as l,ac as C,Q as q,n as v,f as _,t as S,a_ as w,a$ as L,j as R,aQ as F,aw as j,ax as G}from"./index.92b1981f.js";import{Q as H}from"./QInput.7bd0947e.js";import{Q as W,a as g}from"./QTable.f17bfb21.js";import{Q as J}from"./QImg.d5d2e26d.js";import{Q as K}from"./QRadio.a52b195c.js";import{u as X,C as Y,B as Z}from"./BigSpinner.23930169.js";import{_ as A,d as ee}from"./AddAddressModal.b8e9e24e.js";import{f as ae}from"./address.94d37a80.js";import{c as V}from"./capitalize.b0e9fa3f.js";import{_ as le}from"./ConfirmDialog.b785605a.js";import{_ as te}from"./NoData.b4eb18ee.js";import{c as oe}from"./fuzzy-search.950e6fed.js";import"./use-dark.f27ed271.js";import"./focus-manager.05708ea9.js";import"./QList.8f8ed760.js";import"./QSelect.c3432e18.js";import"./QChip.ac7925f0.js";import"./QItemLabel.e8e8f6f6.js";import"./QMenu.27788fe4.js";import"./position-engine.f880795b.js";import"./QDialog.cd420016.js";import"./focusout.ff3e1aa2.js";import"./format.2a3572e1.js";import"./use-checkbox.06902cdf.js";import"./use-fullscreen.5835c99e.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./QSpace.c26d846a.js";import"./QCardSection.6b30cd69.js";import"./QTooltip.320304f6.js";import"./on-form-validation-error.f0562acd.js";import"./QCard.05af6174.js";import"./ClosePopup.0403f3f3.js";const se={class:"text-weight-bold"},Me=U({__name:"ClientAddressesPage",setup(re){const p=P(),Q=u(()=>p.state.addresses.addresses),h=u(()=>oe(Q.value,["city","homeNumber","postalCode","street"])),x=u(()=>h.value.search(y.value)),N=u(()=>p.state.auth.user.userId),E=u(()=>[Y.ADDRESSES_OF_CLIENT(N.value)]);let B=X(E,{store:p});const o=M(),i=n(null),b=n(!1),y=n(""),d=n(!1),m=n(!1),k=n(),I=[{name:"index",label:"#",field:"index",align:"center"},{name:"city",label:o.value.city,align:"center",field:"city",format:s=>V(s)},{name:"street",label:o.value.street,align:"center",field:"street",format:s=>V(s)},{name:"homeNumber",label:o.value.homeNumber,align:"center",field:"homeNumber"},{name:"postalCode",label:o.value.postalCode,align:"center",field:"postalCode"},{name:"actions",label:"",align:"right"}],$=s=>{i.value=s},D=s=>{k.value=s,m.value=!0},z=()=>{F(i.value,"");const s=i.value.id||"";i.value=null,b.value=!0,p.commit.sync(ee({id:s})).then(()=>{j.create({type:"positive",position:"top",timeout:G,message:o.value.deleteSuccess,multiLine:!0,group:!1})}).finally(()=>{b.value=!1})};return(s,a)=>(c(),O("div",null,[r(B)?(c(),f(Z,{key:0})):(c(),f(W,{key:1,class:"q-mx-auto max-w-lg sticky-last-column-table",rows:x.value,columns:I,"row-key":"id","binary-state-sort":"","rows-per-page-label":r(o).perPage,loading:b.value,pagination:{rowsPerPage:r(L)}},{"top-right":t(()=>[l(H,{dense:"",modelValue:y.value,"onUpdate:modelValue":a[0]||(a[0]=e=>y.value=e),placeholder:r(o).search,class:"q-mr-lg q-my-sm"},{append:t(()=>[l(q,{name:"search"})]),_:1},8,["modelValue","placeholder"]),l(v,{color:"primary",icon:"add",label:r(o).addAddress,onClick:a[1]||(a[1]=e=>d.value=!0)},null,8,["label"])]),"body-cell-index":t(e=>[l(g,{props:e},{default:t(()=>[_(S(e.rowIndex+1),1)]),_:2},1032,["props"])]),"body-cell-image":t(e=>[l(g,{props:e},{default:t(()=>[l(J,{src:e.row.imageUrl,fit:"cover",class:"rounded-borders image-sm"},null,8,["src"])]),_:2},1032,["props"])]),"body-cell-active":t(e=>[l(g,{props:e},{default:t(()=>[l(K,{class:"disabled-cursor-default","model-value":"true","checked-icon":"task_alt","unchecked-icon":"close",val:e.row.isActive.toString(),label:"",disable:"",color:e.row.isActive?"positive":"negative","keep-color":""},null,8,["val","color"])]),_:2},1032,["props"])]),"body-cell-actions":t(e=>[l(g,{props:e,"auto-width":""},{default:t(()=>[l(v,{flat:"",size:"md",icon:"mode_edit",color:"primary",dense:"",class:"q-mr-sm",onClick:w(T=>D(e.row),["stop"])},null,8,["onClick"]),l(v,{flat:"",size:"md",icon:"o_delete",color:"negative",dense:"",onClick:w(T=>$(e.row),["stop"])},null,8,["onClick"])]),_:2},1032,["props"])]),"no-data":t(()=>[l(te)]),_:1},8,["rows","rows-per-page-label","loading","pagination"])),l(le,{"model-value":!!i.value,"onUpdate:modelValue":a[2]||(a[2]=e=>i.value=null)},{body:t(()=>[_(S(r(o).confirmAddressDelete)+" ",1),R("span",se,'"'+S(r(ae)(i.value))+'"',1),_("? ")]),confirmButton:t(()=>[l(v,{flat:"",label:r(o).deleteButton,color:"negative",onClick:z},null,8,["label"])]),_:1},8,["model-value"]),m.value?(c(),f(A,{key:2,modelValue:m.value,"onUpdate:modelValue":a[3]||(a[3]=e=>m.value=e),"original-address":k.value,"submit-yourself":"",onSubmit:a[4]||(a[4]=e=>m.value=!1)},null,8,["modelValue","original-address"])):C("",!0),d.value?(c(),f(A,{key:3,modelValue:d.value,"onUpdate:modelValue":a[5]||(a[5]=e=>d.value=e),"submit-yourself":"",onSubmit:a[6]||(a[6]=e=>d.value=!1)},null,8,["modelValue"])):C("",!0)]))}});export{Me as default};
