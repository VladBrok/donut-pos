import{Q as T}from"./QTooltip.64d8fdeb.js";import{d as g,o as c,i as k,t as l,g as o,u as S,a as N,r as y,j as u,k as a,w as i,n as E,bR as V,f as I,h as v,e as b,bS as B,A as L,a9 as M,aG as Q,ah as q,ai as $,bT as D,bU as Y}from"./index.3f3b8c57.js";import{u as j,C as w}from"./BigSpinner.f02a38f1.js";import{a as F}from"./date.b6f3ce26.js";import{_ as A}from"./OrderNumberTitle.bf4db84c.js";import{a as H}from"./PaymentMethodsModal.49b92ce9.js";import{f as K}from"./currency.2af12bed.js";import{_ as G,a as W,b as z,c as J}from"./NotificationsBell.11f8c61d.js";import{_ as X}from"./get-order-type-icon.c0a167f8.js";import{_ as Z,a as ee}from"./MainLayout.4b9e14de.js";import"./position-engine.8a5cdfb5.js";import"./focus-manager.05708ea9.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./dayjs.min.78c0669c.js";import"./focusout.8d369a05.js";import"./QSpace.b6962a17.js";import"./QCardSection.1779170a.js";import"./QCard.bbe847d6.js";import"./use-dark.fca62a05.js";import"./QDialog.8f914458.js";import"./ClosePopup.880cf5c6.js";import"./browser.1a1bd576.js";import"./QImg.bc00f4b6.js";import"./QItemLabel.b85da9a3.js";import"./QList.cda24842.js";import"./QInput.af205288.js";import"./on-form-validation-error.a634981b.js";import"./get-order-total-cost.0ab55512.js";import"./address.94d37a80.js";import"./capitalize.b0e9fa3f.js";import"./CommonFooter.a74657d3.js";import"./NoData.f3f3f67f.js";import"./OrderView.fe1bc0bf.js";import"./QBtnDropdown.bd396750.js";import"./QMenu.5622cc90.js";import"./phone.158664be.js";import"./QSelect.dcdd87e0.js";import"./QChip.e4eb7192.js";import"./AddAddressModal.1b9f025f.js";import"./PhoneInput.e5cc4833.js";import"./useIsLoggedIn.876d5ddb.js";import"./create-order.7182eabd.js";import"./fuzzy-search.950e6fed.js";import"./ConfirmDialog.7d9f2db6.js";import"./ProductCounter.a856a3d8.js";const te={class:"text-dark-lighter text-caption"},oe=g({__name:"NotificationTime",props:{time:{}},setup(h){return(r,d)=>(c(),k("div",te,l(o(F)(r.time)),1))}}),re={class:"row no-wrap gap-md q-py-md q-px-xs items-center"},se={class:"flex-grow"},ae={class:"text-body2"},ne={class:"q-mb-xs row no-wrap items-center justify-between"},ie={class:"text-subtitle1 text-weight-bold"},ue={class:"q-mt-md row gap-sm justify-between"},le={class:"text-primary text-h5 q-pr-sm"},de=g({__name:"CashPaymentRequest",props:{request:{}},setup(h){const r=h,d=S(),e=N(),p=y(!1),s=y(!1),_=()=>{s.value=!0,e.commit.sync(V({id:r.request.id})).finally(()=>{s.value=!1})};return(m,n)=>(c(),k("div",re,[u("div",se,[u("div",ae,[u("div",ne,[u("p",ie,l(o(d).cashPaymentRequest),1),a(oe,{time:m.request.requestedAt},null,8,["time"])]),u("div",null,l(o(d).tableNumber)+" "+l(m.request.table.number||"-")+", ",1),a(A,{"order-number":m.request.orderNumber,"is-link":""},null,8,["order-number"])]),u("div",null,[u("div",ue,[a(E,{color:"primary",onClick:n[0]||(n[0]=f=>p.value=!0),loading:s.value},{default:i(()=>[I(l(o(d).acceptPayment),1)]),_:1},8,["loading"]),u("div",le,l(o(K)(m.request.totalCost)),1)])])]),a(H,{modelValue:p.value,"onUpdate:modelValue":n[1]||(n[1]=f=>p.value=f),onClose:n[2]||(n[2]=f=>p.value=!1),"total-cost":m.request.totalCost,"order-number":m.request.orderNumber,onPaid:_},null,8,["modelValue","total-cost","order-number"])]))}}),me=g({__name:"CookedDishStatusButton",props:{cookedDish:{}},emits:["statusUpdated"],setup(h,{emit:r}){const d=h,e=r,p=S(),s=N(),_=y(!1),m=v(()=>s.state.auth.user.userId);function n(){_.value=!0,s.commit.sync(B({employeeId:m.value||"",orderId:d.cookedDish.order.id,orderNumber:d.cookedDish.order.orderNumber,dishIdInOrder:d.cookedDish.dish.dishIdInOrder})).then(()=>{e("statusUpdated")}).finally(()=>{_.value=!1})}return(f,C)=>(c(),b(o(E),{color:"primary",loading:_.value,onClick:n},{default:i(()=>[I(l(o(p).delivered),1)]),_:1},8,["loading"]))}}),ce={class:"text-body2"},pe={class:"text-h5"},at=g({__name:"WaiterLayout",setup(h){const r=S(),d=[{icon:"o_restaurant_menu",label:r.value.menu,to:"/waiter/menu",meta:r.value.menu},{icon:"o_receipt_long",label:r.value.orders,to:"/waiter/orders",meta:r.value.orders}],e=N(),p=v(()=>e.state.orderDrawer.isCurrentOrderOpen),s=y(e.state.auth.user.userId),_=v(()=>s.value===Q.userId?[]:[w.COOKED_DISHES_OF_EMPLOYEE(s.value),w.CASH_PAYMENT_REQUESTS_OF_EMPLOYEE(s.value),w.COOKED_ORDERS(s.value)]);let m=j(_,{store:e});const n=v(()=>e.state.orders.cookedDishes),f=v(()=>e.state.orders.cookedOrders),C=v(()=>e.state.cashPaymentRequests.requests),R=v(()=>n.value.length+C.value.length+f.value.length),x=y(()=>{});L(()=>{x.value=e.client.on("user",P=>{s.value=P})}),M(()=>{x.value()});function U(){p.value?e.commit.local(D()):e.commit.local(Y())}return(P,O)=>(c(),b(Z,{"menu-list":d},{actions:i(()=>[a(W,{"is-loading":o(m),"notification-count":R.value},{"notification-list":i(()=>[(c(!0),k($,null,q(C.value,t=>(c(),b(de,{key:t.id,request:t},null,8,["request"]))),128)),(c(!0),k($,null,q(f.value,t=>(c(),b(G,{key:t.order.id,order:t},null,8,["order"]))),128)),(c(!0),k($,null,q(n.value,t=>(c(),b(X,{key:t.dish.dishIdInOrder,dish:t.dish,count:t.dish.count,order:t.order,"view-only":"","hide-price":""},{"additonal-info":i(()=>[u("div",ce,[u("div",null,l(o(r).tableNumber)+" "+l(t.order.table.number||"-")+", ",1),a(A,{"order-number":t.order.orderNumber,"is-link":""},null,8,["order-number"])])]),actions:i(()=>[a(me,{"cooked-dish":t},null,8,["cooked-dish"])]),_:2},1032,["dish","count","order"]))),128))]),_:1},8,["is-loading","notification-count"]),a(E,{class:"q-mr-sm shopping-basket",flat:"",round:"",icon:"o_shopping_basket",onClick:U},{default:i(()=>[a(T,null,{default:i(()=>[I(l(o(r).openCurrentOrder),1)]),_:1}),a(z)]),_:1})]),drawers:i(()=>[a(ee,{"model-value":p.value,"onUpdate:modelValue":O[0]||(O[0]=t=>o(e).commit.local(o(D)())),onClose:O[1]||(O[1]=t=>o(e).commit.local(o(D)()))},{title:i(()=>[u("p",pe,l(o(r).currentOrder),1)]),content:i(()=>[a(J)]),_:1},8,["model-value"])]),_:1}))}});export{at as default};
